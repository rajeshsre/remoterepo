root@docker:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED             STATUS             PORTS                                     NAMES
b9b9f15def35   nginx     "/docker-entrypoint.…"   40 minutes ago      Up 40 minutes      0.0.0.0:32768->80/tcp, :::32768->80/tcp   nginx-container
f7cd09589b0a   nginx     "/docker-entrypoint.…"   57 minutes ago      Up 57 minutes      80/tcp                                    bind-volume-cont1
5e6a469fac47   nginx     "/docker-entrypoint.…"   About an hour ago   Up About an hour   80/tcp                                    bind-volume-cont
3b8ecc18ccae   nginx     "/docker-entrypoint.…"   About an hour ago   Up About an hour   80/tcp                                    bind-mount-cont
root@docker:~# 
root@docker:~# vi dockerfile
root@docker:~# cat dockerfile 
FROM ubuntu:trusty
CMD ping -c 4 google.com
root@docker:~# 
root@docker:~# docker build -t ubuntu:ping .
[+] Building 11.0s (5/5) FINISHED                                                                                                                                                                            docker:default
 => [internal] load build definition from dockerfile                                                                                                                                                                   0.0s
 => => transferring dockerfile: 81B                                                                                                                                                                                    0.0s
 => [internal] load metadata for docker.io/library/ubuntu:trusty                                                                                                                                                       3.0s
 => [internal] load .dockerignore                                                                                                                                                                                      0.0s
 => => transferring context: 2B                                                                                                                                                                                        0.0s
 => [1/1] FROM docker.io/library/ubuntu:trusty@sha256:64483f3496c1373bfd55348e88694d1c4d0c9b660dee6bfef5e12f43b9933b30                                                                                                 7.9s
 => => resolve docker.io/library/ubuntu:trusty@sha256:64483f3496c1373bfd55348e88694d1c4d0c9b660dee6bfef5e12f43b9933b30                                                                                                 0.0s
 => => sha256:64483f3496c1373bfd55348e88694d1c4d0c9b660dee6bfef5e12f43b9933b30 1.20kB / 1.20kB                                                                                                                         0.0s
 => => sha256:881afbae521c910f764f7187dbfbca3cc10c26f8bafa458c76dda009a901c29d 945B / 945B                                                                                                                             0.0s
 => => sha256:13b66b487594a1f2b75396013bc05d29d9f527852d96c5577cc4f187559875d0 3.31kB / 3.31kB                                                                                                                         0.0s
 => => sha256:2e6e20c8e2e69fa5c3fcc310f419975cef5fbeb6f7f2fe1374071141281b6a06 70.69MB / 70.69MB                                                                                                                       1.5s
 => => sha256:0551a797c01db074ab0233ceb567e66b8ebdcb9de9a2e7baa36d57dfbca463a3 72.66kB / 72.66kB                                                                                                                       0.9s
 => => sha256:512123a864da5e2a62949e65b67106292c5c704eff90cac2b949fc8d7ac1e58e 189B / 189B                                                                                                                             0.3s
 => => extracting sha256:2e6e20c8e2e69fa5c3fcc310f419975cef5fbeb6f7f2fe1374071141281b6a06                                                                                                                              6.1s
 => => extracting sha256:0551a797c01db074ab0233ceb567e66b8ebdcb9de9a2e7baa36d57dfbca463a3                                                                                                                              0.0s
 => => extracting sha256:512123a864da5e2a62949e65b67106292c5c704eff90cac2b949fc8d7ac1e58e                                                                                                                              0.0s
 => exporting to image                                                                                                                                                                                                 0.0s
 => => exporting layers                                                                                                                                                                                                0.0s
 => => writing image sha256:089eca6bbf9444c6c1fb147a970e449e79d0f045d535e9685f1327882e9595cc                                                                                                                           0.0s
 => => naming to docker.io/library/ubuntu:ping                                                                                                                                                                         0.0s

 1 warning found (use docker --debug to expand):
 - JSONArgsRecommended: JSON arguments recommended for CMD to prevent unintended behavior related to OS signals (line 2)
root@docker:~# 

root@docker:~# docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED             STATUS             PORTS                                     NAMES
b9b9f15def35   nginx     "/docker-entrypoint.…"   About an hour ago   Up About an hour   0.0.0.0:32768->80/tcp, :::32768->80/tcp   nginx-container
f7cd09589b0a   nginx     "/docker-entrypoint.…"   2 hours ago         Up 2 hours         80/tcp                                    bind-volume-cont1
5e6a469fac47   nginx     "/docker-entrypoint.…"   2 hours ago         Up 2 hours         80/tcp                                    bind-volume-cont
3b8ecc18ccae   nginx     "/docker-entrypoint.…"   2 hours ago         Up 2 hours         80/tcp                                    bind-mount-cont
root@docker:~# docker ps -a
CONTAINER ID   IMAGE         COMMAND                  CREATED             STATUS                  PORTS                                     NAMES
b9b9f15def35   nginx         "/docker-entrypoint.…"   About an hour ago   Up About an hour        0.0.0.0:32768->80/tcp, :::32768->80/tcp   nginx-container
f7cd09589b0a   nginx         "/docker-entrypoint.…"   2 hours ago         Up 2 hours              80/tcp                                    bind-volume-cont1
5e6a469fac47   nginx         "/docker-entrypoint.…"   2 hours ago         Up 2 hours              80/tcp                                    bind-volume-cont
3b8ecc18ccae   nginx         "/docker-entrypoint.…"   2 hours ago         Up 2 hours              80/tcp                                    bind-mount-cont
f4abd457b1c5   nginx         "/docker-entrypoint.…"   2 days ago          Exited (0) 2 days ago                                             n2
75a726c4c587   httpd         "httpd-foreground"       2 days ago          Exited (0) 2 days ago                                             h2
1f88a1fb35c0   httpd         "httpd-foreground"       2 days ago          Exited (0) 2 days ago                                             h1
9df36a9dc323   ubuntu        "/bin/bash"              2 days ago          Exited (0) 2 days ago                                             kind_ardinghelli
10c64f9160f0   ubuntu        "/bin/bash"              2 days ago          Exited (0) 2 days ago                                             funny_tesla
11aebe34abd1   hello-world   "/hello"                 5 days ago          Exited (0) 5 days ago                                             flamboyant_stonebraker
root@docker:~# 
root@docker:~# docker run ubuntu:ping
PING google.com (142.250.193.206) 56(84) bytes of data.
64 bytes from del11s17-in-f14.1e100.net (142.250.193.206): icmp_seq=1 ttl=119 time=3.53 ms
64 bytes from del11s17-in-f14.1e100.net (142.250.193.206): icmp_seq=2 ttl=119 time=1.32 ms
64 bytes from del11s17-in-f14.1e100.net (142.250.193.206): icmp_seq=3 ttl=119 time=1.29 ms
64 bytes from del11s17-in-f14.1e100.net (142.250.193.206): icmp_seq=4 ttl=119 time=1.40 ms

--- google.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3003ms
rtt min/avg/max/mdev = 1.298/1.891/3.538/0.951 ms
root@docker:~# docker ps -a
CONTAINER ID   IMAGE         COMMAND                  CREATED             STATUS                     PORTS                                     NAMES
81e246b1b612   ubuntu:ping   "/bin/sh -c 'ping -c…"   9 seconds ago       Exited (0) 6 seconds ago                                             nostalgic_dewdney
b9b9f15def35   nginx         "/docker-entrypoint.…"   About an hour ago   Up About an hour           0.0.0.0:32768->80/tcp, :::32768->80/tcp   nginx-container
f7cd09589b0a   nginx         "/docker-entrypoint.…"   2 hours ago         Up 2 hours                 80/tcp                                    bind-volume-cont1
5e6a469fac47   nginx         "/docker-entrypoint.…"   2 hours ago         Up 2 hours                 80/tcp                                    bind-volume-cont
3b8ecc18ccae   nginx         "/docker-entrypoint.…"   2 hours ago         Up 2 hours                 80/tcp                                    bind-mount-cont
f4abd457b1c5   nginx         "/docker-entrypoint.…"   2 days ago          Exited (0) 2 days ago                                                n2
75a726c4c587   httpd         "httpd-foreground"       2 days ago          Exited (0) 2 days ago                                                h2
1f88a1fb35c0   httpd         "httpd-foreground"       2 days ago          Exited (0) 2 days ago                                                h1
9df36a9dc323   ubuntu        "/bin/bash"              2 days ago          Exited (0) 2 days ago                                                kind_ardinghelli
10c64f9160f0   ubuntu        "/bin/bash"              2 days ago          Exited (0) 2 days ago                                                funny_tesla
11aebe34abd1   hello-world   "/hello"                 5 days ago          Exited (0) 5 days ago                                                flamboyant_stonebraker
root@docker:~# 

root@docker:~# ls
dest  dest1  dockerfile  snap
root@docker:~# mkdir layers
root@docker:~# cd layers/
root@docker:~/layers# ls
root@docker:~/layers# vi dockerfile
root@docker:~/layers# cat dockerfile 
#Image layers
FROM ubuntu:18.04
RUN apt update && apt install nginx -y
root@docker:~/layers# docker images
REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
httpd         latest    19c71fbb7140   2 weeks ago     148MB
nginx         latest    a72860cb95fd   6 weeks ago     188MB
ubuntu        latest    35a88802559d   2 months ago    78.1MB
hello-world   latest    d2c94e258dcb   15 months ago   13.3kB
ubuntu        ping      089eca6bbf94   3 years ago     197MB
root@docker:~/layers# docker ps -a
CONTAINER ID   IMAGE         COMMAND                  CREATED         STATUS                     PORTS                                     NAMES
81e246b1b612   ubuntu:ping   "/bin/sh -c 'ping -c…"   7 minutes ago   Exited (0) 7 minutes ago                                             nostalgic_dewdney
b9b9f15def35   nginx         "/docker-entrypoint.…"   2 hours ago     Up 2 hours                 0.0.0.0:32768->80/tcp, :::32768->80/tcp   nginx-container
f7cd09589b0a   nginx         "/docker-entrypoint.…"   2 hours ago     Up 2 hours                 80/tcp                                    bind-volume-cont1
5e6a469fac47   nginx         "/docker-entrypoint.…"   2 hours ago     Up 2 hours                 80/tcp                                    bind-volume-cont
3b8ecc18ccae   nginx         "/docker-entrypoint.…"   2 hours ago     Up 2 hours                 80/tcp                                    bind-mount-cont
f4abd457b1c5   nginx         "/docker-entrypoint.…"   2 days ago      Exited (0) 2 days ago                                                n2
75a726c4c587   httpd         "httpd-foreground"       2 days ago      Exited (0) 2 days ago                                                h2
1f88a1fb35c0   httpd         "httpd-foreground"       2 days ago      Exited (0) 2 days ago                                                h1
9df36a9dc323   ubuntu        "/bin/bash"              2 days ago      Exited (0) 2 days ago                                                kind_ardinghelli
10c64f9160f0   ubuntu        "/bin/bash"              2 days ago      Exited (0) 2 days ago                                                funny_tesla
11aebe34abd1   hello-world   "/hello"                 6 days ago      Exited (0) 6 days ago                                                flamboyant_stonebraker
root@docker:~/layers# 
root@docker:~/layers# docker build -t ubuntu:layer .
[+] Building 28.1s (6/6) FINISHED                                                                                                                                                                            docker:default
 => [internal] load build definition from dockerfile                                                                                                                                                                   0.0s
 => => transferring dockerfile: 108B                                                                                                                                                                                   0.0s
 => [internal] load metadata for docker.io/library/ubuntu:18.04                                                                                                                                                        2.8s
 => [internal] load .dockerignore                                                                                                                                                                                      0.0s
 => => transferring context: 2B                                                                                                                                                                                        0.0s
 => [1/2] FROM docker.io/library/ubuntu:18.04@sha256:152dc042452c496007f07ca9127571cb9c29697f42acbfad72324b2bb2e43c98                                                                                                  2.4s
 => => resolve docker.io/library/ubuntu:18.04@sha256:152dc042452c496007f07ca9127571cb9c29697f42acbfad72324b2bb2e43c98                                                                                                  0.0s
 => => sha256:7c457f213c7634afb95a0fb2410a74b7b5bc0ba527033362c240c7a11bef4331 25.69MB / 25.69MB                                                                                                                       0.6s
 => => sha256:152dc042452c496007f07ca9127571cb9c29697f42acbfad72324b2bb2e43c98 1.33kB / 1.33kB                                                                                                                         0.0s
 => => sha256:dca176c9663a7ba4c1f0e710986f5a25e672842963d95b960191e2d9f7185ebe 424B / 424B                                                                                                                             0.0s
 => => sha256:f9a80a55f492e823bf5d51f1bd5f87ea3eed1cb31788686aa99a2fb61a27af6a 2.30kB / 2.30kB                                                                                                                         0.0s
 => => extracting sha256:7c457f213c7634afb95a0fb2410a74b7b5bc0ba527033362c240c7a11bef4331                                                                                                                              1.6s
 => [2/2] RUN apt update && apt install nginx -y                                                                                                                                                                      22.1s
 => exporting to image                                                                                                                                                                                                 0.8s 
 => => exporting layers                                                                                                                                                                                                0.8s 
 => => writing image sha256:015cb2a2f66d8bf1317c5531e1215070b15dc2edf390bbcd29e28c725897a38e                                                                                                                           0.0s 
 => => naming to docker.io/library/ubuntu:layer                                                                                                                                                                        0.0s 
root@docker:~/layers# docker images                                                                                                                                                                                         
REPOSITORY    TAG       IMAGE ID       CREATED          SIZE                                                                                                                                                                
ubuntu        layer     015cb2a2f66d   14 seconds ago   169MB
httpd         latest    19c71fbb7140   2 weeks ago      148MB
nginx         latest    a72860cb95fd   6 weeks ago      188MB
ubuntu        latest    35a88802559d   2 months ago     78.1MB
hello-world   latest    d2c94e258dcb   15 months ago    13.3kB
ubuntu        ping      089eca6bbf94   3 years ago      197MB


root@docker:~/layers# docker image inspect ubuntu:layer
[
    {
        "Id": "sha256:015cb2a2f66d8bf1317c5531e1215070b15dc2edf390bbcd29e28c725897a38e",
        "RepoTags": [
            "ubuntu:layer"
        ],
        "RepoDigests": [],
        "Parent": "",
        "Comment": "buildkit.dockerfile.v0",
        "Created": "2024-08-07T02:57:02.99971927Z",
        "DockerVersion": "",
        "Author": "",
        "Config": {
            "Hostname": "",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "/bin/bash"
            ],
            "Image": "",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {
                "org.opencontainers.image.ref.name": "ubuntu",
                "org.opencontainers.image.version": "18.04"
            }
        },
        "Architecture": "amd64",
        "Os": "linux",
        "Size": 169139899,
        "GraphDriver": {
            "Data": {
                "LowerDir": "/var/lib/docker/overlay2/f4db137c5dd72b5e577717fddc6c5e4037af5debe1921b6510523fa5d0b3e9ec/diff",
                "MergedDir": "/var/lib/docker/overlay2/zlmhssyaad019v2fbbxb35yfo/merged",
                "UpperDir": "/var/lib/docker/overlay2/zlmhssyaad019v2fbbxb35yfo/diff",
                "WorkDir": "/var/lib/docker/overlay2/zlmhssyaad019v2fbbxb35yfo/work"
            },
            "Name": "overlay2"
        },
        "RootFS": {
            "Type": "layers",
            "Layers": [
                "sha256:548a79621a426b4eb077c926eabac5a8620c454fb230640253e1b44dc7dd7562",
                "sha256:5865f7f5709b7d21347bdff9f14bb2282821472a34c0e7ddb4549362c26db41b"
            ]
        },
        "Metadata": {
            "LastTagTime": "2024-08-07T02:57:03.790239288Z"
        }
    }
]
root@docker:~/layers# 


root@docker:~/layers# ls
dockerfile
root@docker:~/layers# vi otherdockerfile
root@docker:~/layers# docker build -t ubuntu:other -f otherdockerfile .
[+] Building 22.5s (7/7) FINISHED                                                                                                                                                                            docker:default
 => [internal] load build definition from otherdockerfile                                                                                                                                                              0.0s
 => => transferring dockerfile: 114B                                                                                                                                                                                   0.0s
 => [internal] load metadata for docker.io/library/ubuntu:18.04                                                                                                                                                        1.7s
 => [internal] load .dockerignore                                                                                                                                                                                      0.0s
 => => transferring context: 2B                                                                                                                                                                                        0.0s
 => CACHED [1/3] FROM docker.io/library/ubuntu:18.04@sha256:152dc042452c496007f07ca9127571cb9c29697f42acbfad72324b2bb2e43c98                                                                                           0.0s
 => [2/3] RUN apt update                                                                                                                                                                                               8.3s
 => [3/3] RUN apt install nginx -y                                                                                                                                                                                    11.8s 
 => exporting to image                                                                                                                                                                                                 0.6s 
 => => exporting layers                                                                                                                                                                                                0.5s 
 => => writing image sha256:cc0276ceb67799db7dc518259bdf7576d0dad544ac61d64857f19b74a6327835                                                                                                                           0.0s 
 => => naming to docker.io/library/ubuntu:other                                                                                                                                                                        0.0s 
root@docker:~/layers# 
root@docker:~/layers# cat otherdockerfile                                                                                                                                                                                   
#image layers
FROM ubuntu:18.04
RUN apt update
RUN apt install nginx -y
root@docker:~/layers# 

root@docker:~/layers# docker images
REPOSITORY    TAG       IMAGE ID       CREATED              SIZE
ubuntu        other     cc0276ceb677   About a minute ago   169MB
ubuntu        layer     015cb2a2f66d   12 minutes ago       169MB
httpd         latest    19c71fbb7140   2 weeks ago          148MB
nginx         latest    a72860cb95fd   6 weeks ago          188MB
ubuntu        latest    35a88802559d   2 months ago         78.1MB
hello-world   latest    d2c94e258dcb   15 months ago        13.3kB
ubuntu        ping      089eca6bbf94   3 years ago          197MB
root@docker:~/layers# docker image inspect ubuntu:other
[
    {
        "Id": "sha256:cc0276ceb67799db7dc518259bdf7576d0dad544ac61d64857f19b74a6327835",
        "RepoTags": [
            "ubuntu:other"
        ],
        "RepoDigests": [],
        "Parent": "",
        "Comment": "buildkit.dockerfile.v0",
        "Created": "2024-08-07T03:07:59.861180004Z",
        "DockerVersion": "",
        "Author": "",
        "Config": {
            "Hostname": "",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "/bin/bash"
            ],
            "Image": "",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {
                "org.opencontainers.image.ref.name": "ubuntu",
                "org.opencontainers.image.version": "18.04"
            }
        },
        "Architecture": "amd64",
        "Os": "linux",
        "Size": 169139899,
        "GraphDriver": {
            "Data": {
                "LowerDir": "/var/lib/docker/overlay2/ax3fz00bhyxl64j94s5izetmm/diff:/var/lib/docker/overlay2/f4db137c5dd72b5e577717fddc6c5e4037af5debe1921b6510523fa5d0b3e9ec/diff",
                "MergedDir": "/var/lib/docker/overlay2/zr4jo7flu2bd3ce7y7t6wstdt/merged",
                "UpperDir": "/var/lib/docker/overlay2/zr4jo7flu2bd3ce7y7t6wstdt/diff",
                "WorkDir": "/var/lib/docker/overlay2/zr4jo7flu2bd3ce7y7t6wstdt/work"
            },
            "Name": "overlay2"
        },
        "RootFS": {
            "Type": "layers",
            "Layers": [
                "sha256:548a79621a426b4eb077c926eabac5a8620c454fb230640253e1b44dc7dd7562",
                "sha256:ae4606ed2965966d1b9a8199ed8208daca30c448970f2fad7cdd0f517fb25294",
                "sha256:b16d4139b2b044a3cadb008e659fd5f9f970a6e9c2718334668c0dd2977dd2b8"
            ]
        },
        "Metadata": {
            "LastTagTime": "2024-08-07T03:08:00.407846028Z"
        }
    }
]
root@docker:~/layers# 
